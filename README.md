# Hackathon_Project_Backend
Серверная часть приложения на хакатон Samsung

![alt text](https://raw.githubusercontent.com/penakelex/Hackathon_Project_Backend/main/networkArchitecture.png)

<hr/>

### Открытие проекта
***Не используйте корневую папку как корень проекта!***  
* Если вам необходимо провести работу над глобальным сервером, то откройте проект в папке **globalServer**. В противном случае, у вас не получится запустить сервер.  
* Если вам необходимо провести работу над приватным сервером, то откройте проект в папке **personalServer**. В противном случае, у вас не получится запустить сервер.
<hr/>

### WEB API запросы для глобального сервера

 * http://127.0.0.1/register  
Метод: POST  
Аргументы: `username, password, email` типов `строка, строка, строка`.  
Результат выполнения: JSON с полями `status, authKey, message` типов `целое число, строка, строка`.  
В случае, когда `status == 200` - регистрация успешна и в поле `authKey` передан *ключ авторизации текущей сессии*.  
В случае, когда `status != 200` - регистрация провалена. Поле `message` содержит *причину неудачи*.  

 * http://127.0.0.1/login  
Метод: POST  
Аргументы: `username, password` типов `строка, строка`.  
Результат выполнения: JSON с полями `status, authKey, message` типов `целое число, строка, строка`.  
*Внимание: предыдущая сессия автоматически удалится!*  
В случае, когда `status == 200` - вход успешен и в поле `authKey` передан *ключ авторизации текущей сессии*.  
В случае, когда `status != 200` - вход провален. Поле `message` содержит *причину неудачи*.  

 * http://127.0.0.1/quit  
Метод: POST  
Аргументы: `authKey` типов `строка`.  
Результат выполнения: JSON с полями `status, message` типа `целое число`.  
В случае, когда `status == 200` - указанный ключ авторизации становится недействительным.  
В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.  

 * http://127.0.0.1/about  
Метод: POST  
Аргументы: `authKey, username` типа `строка, строка`.  
Результат выполнения: JSON с полями `status, username, name, surname, dateOfBirth, icon, message` типов `число, строка, строка, строка, строка, строка`.  
В случае, когда `status == 200` - возвращает данные о пользователе c именем пользователя username: *Имя, Фамилия, Дата рождения, **ссылка на аватарку***.  
В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

 * http://127.0.0.1/isSession  
   Метод: POST  
   Аргументы: `authKey` типа `строка`.  
   Результат выполнения: JSON с полями `status, state, message` типов `число, boolean, строка`.  
   В случае, когда `status == 200` - возвращает `state=true`, если ключ настоящий. Иначе `state=false`.  
   В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/userBySession  
  Метод: POST  
  Аргументы: `authKey` типа `строка`.  
  Результат выполнения: JSON с полями `status, username, message` типов `число, строка, строка`.  
  В случае, когда `status == 200` - возвращает имя пользователя.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.


 * **Если любой из приведенных выше запросов завершится неудачей или ошибкой**, то в результате будет выведен JSON с полями `status, message`, где `status != 200` а поле `message` содержит причину неудачи или ошибки.
 
<hr/>

### WEB API запросы для приватного сервера

* http://127.0.0.1/listUsers  
  Метод: POST  
  Аргументы: `authKey` типа `строка`.  
  Результат выполнения: JSON с полями `status, users, message` типов `число, массив, строка`.  
  В случае, когда `status == 200` - возвращает массив, содержащий `username` пользователей (участников сервера).  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/addFriend  
  Метод: POST  
  Аргументы: `authKey, username` типа `строка, строка`.  
  Результат выполнения: JSON с полями `status, state, message` типов `число, число, строка`.  
  В случае, когда `status == 200` - поле `state` содержит одно из следующих значений:  
  *0 - Запрос дружбы отправлен*  
  *1 - Пользователь добавлен в друзья*  
  *2 - Пользователь недоступен (не на сервере)*  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/removeFriend  
  Метод: POST  
  Аргументы: `authKey, username` типа `строка, строка`.  
  Результат выполнения: JSON с полями `status, message` типов `число, строка`.  
  В случае, когда `status == 200` - пользователь удален из списка друзей.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/friends  
  Метод: POST  
  Аргументы: `authKey` типа `строка`.  
  Результат выполнения: JSON с полями `status, friends, message` типов `число, массив[строки], строка`.  
  В случае, когда `status == 200` - возвращает массив, содержащий `username` ваших друзей (участников этого сервера).  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/setGeo  
  Метод: POST  
  Аргументы: `authKey, altitude, longitude` типа `строка, double, double`.  
  Результат выполнения: JSON с полями `status, message` типов `число, строка`.  
  В случае, когда `status == 200` - Последняя геопозиция текущего полльзователя установлена.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/getGeo  
  Метод: POST  
  Аргументы: `authKey, username` типа `строка, строка`.  
  Результат выполнения: JSON с полями `status, altitude, longitude, message` типов `число, double, double, строка`.  
  В случае, когда `status == 200` - Геопозиция `указанного друга` получена.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/sendMessage  
  Метод: POST  
  Аргументы: `authKey, username, message` типа `строка, строка, строка`.  
  Результат выполнения: JSON с полями `status, newMessage, message` типов `число, строка, строка`.  
  В случае, когда `status == 200` - Сообщение `newMessage` отправлено пользователю.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/getMessages  
  Метод: POST  
  Аргументы: `authKey, username, page` типа `строка, строка, число`.  
  Результат выполнения: JSON с полями `status, messages, message` типов `число, массив[строка, дата], строка`.  
  В случае, когда `status == 200` - переданы 10 текстовых сообщений, каждое из которых представляет из себя обьект с `message, date` - текст сообщения и дата отправки соответственно. с указанной страницы (каждая страница содержит 10 сообщений. Чем больше номер страницы, тем более давние сообщения будут получены).  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.

* http://127.0.0.1/newMessages  
  Метод: POST  
  Аргументы: `authKey` типа `строка`.  
  Результат выполнения: JSON с полями `status, newMessages, message` типов `число, массив[строка], строка`.  
  В случае, когда `status == 200` - передает массив, содержащий ***имена пользователей***, чьи сообщения еще не были просмотрены.  
  В случае, когда `status != 200` - произошла ошибка, причина которой указана в поле `message`.